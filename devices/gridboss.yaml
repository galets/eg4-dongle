text_sensor:
  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Serial Number
    id: serialNumber
    icon: mdi:card-text-outline
    entity_category: diagnostic
    register_type: holding
    address: 2
    response_size: 10
    register_count: 5
    skip_updates: 50
    lambda: |-
      char result[20];
      sprintf(result, "%c%c%c%c%c%c%c%c%c%c", 
          data[item->offset + 1],
          data[item->offset + 0],
          data[item->offset + 3],
          data[item->offset + 2],
          data[item->offset + 5],
          data[item->offset + 4],
          data[item->offset + 7],
          data[item->offset + 6],
          data[item->offset + 9],
          data[item->offset + 8]);
      return {result};

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Firmware Version
    id: firmwareVersion
    icon: mdi:card-text-outline
    entity_category: diagnostic
    register_type: holding
    address: 7
    response_size: 6
    register_count: 3
    skip_updates: 50
    lambda: |-
      char result[20];
      sprintf(result, "%c%c%c%c-%02X%02X", 
          data[item->offset + 1],
          data[item->offset + 0],
          data[item->offset + 3],
          data[item->offset + 2],
          data[item->offset + 4],
          data[item->offset + 5]);
      return {result};

sensor:
  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid voltage
    id: gridRmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 1
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS Voltage
    id: upsRmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 2
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator Voltage
    id: genRmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 3
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L1 voltage
    id: gridL1RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 4
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L2 voltage
    id: gridL2RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 5
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L1 voltage
    id: upsL1RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 6
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L2 voltage
    id: upsL2RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 7
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L1 voltage
    id: genL1RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 8
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L2 voltage
    id: genL2RmsVolt
    icon: mdi:lightning-bolt
    register_type: read
    address: 9
    unit_of_measurement: 'V'
    device_class: voltage
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L1 current
    id: gridL1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 10
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L2 current
    id: gridL2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 11
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load L1 current
    id: loadL1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 12
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load L2 current
    id: loadL2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 13
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L1 current
    id: genL1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 14
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L2 current
    id: genL2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 15
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L1 current
    id: upsL1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 16
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L2 current
    id: upsL2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 17
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 L1 current
    id: smartLoad1L1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 18
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 L2 current
    id: smartLoad1L2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 19
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 L1 current
    id: smartLoad2L1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 20
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 L2 current
    id: smartLoad2L2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 21
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 L1 current
    id: smartLoad3L1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 22
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 L2 current
    id: smartLoad3L2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 23
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 L1 current
    id: smartLoad4L1RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 24
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 L2 current
    id: smartLoad4L2RmsCurr
    icon: mdi:current-ac
    register_type: read
    address: 25
    disabled_by_default: true
    unit_of_measurement: 'A'
    device_class: current
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L1 active power
    id: gridL1ActivePower
    icon: mdi:power
    register_type: read
    address: 26
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: gridActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid L2 active power
    id: gridL2ActivePower
    icon: mdi:power
    register_type: read
    address: 27
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: gridActivePower

  - platform: template
    name: Grid active power
    id: gridActivePower
    icon: mdi:power
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(gridL1ActivePower).state + id(gridL2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load L1 active power
    id: loadL1ActivePower
    icon: mdi:power
    register_type: read
    address: 28
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: loadActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load L2 active power
    id: loadL2ActivePower
    icon: mdi:power
    register_type: read
    address: 29
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: loadActivePower

  - platform: template
    name: Load active power
    id: loadActivePower
    icon: mdi:power
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(loadL1ActivePower).state + id(loadL2ActivePower).state;
  
  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L1 active power
    id: genL1ActivePower
    icon: mdi:power
    register_type: read
    address: 30
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: genActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator L2 active power
    id: genL2ActivePower
    icon: mdi:power
    register_type: read
    address: 31
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: genActivePower

  - platform: template
    name: Generator active power
    id: genActivePower
    icon: mdi:power
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(genL1ActivePower).state + id(genL2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L1 active power
    id: upsL1ActivePower
    icon: mdi:power
    register_type: read
    address: 32
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: upsActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS L2 active power
    id: upsL2ActivePower
    icon: mdi:power
    register_type: read
    address: 33
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: upsActivePower

  - platform: template
    name: UPS active power
    id: upsActivePower
    icon: mdi:power
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(upsL1ActivePower).state + id(upsL2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 L1 active power
    id: smartLoad1L1ActivePower
    icon: mdi:power
    register_type: read
    address: 34
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad1ActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 L2 active power
    id: smartLoad1L2ActivePower
    icon: mdi:power
    register_type: read
    address: 35
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad1ActivePower

  - platform: template
    name: Smart Load 1 active power
    id: smartLoad1ActivePower
    icon: mdi:power
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(smartLoad1L1ActivePower).state + id(smartLoad1L2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 L1 active power
    id: smartLoad2L1ActivePower
    icon: mdi:power
    register_type: read
    address: 36
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad2ActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 L2 active power
    id: smartLoad2L2ActivePower
    icon: mdi:power
    register_type: read
    address: 37
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad2ActivePower

  - platform: template
    name: Smart Load 2 active power
    id: smartLoad2ActivePower
    icon: mdi:power
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(smartLoad2L1ActivePower).state + id(smartLoad2L2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 L1 active power
    id: smartLoad3L1ActivePower
    icon: mdi:power
    register_type: read
    address: 38
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad3ActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 L2 active power
    id: smartLoad3L2ActivePower
    icon: mdi:power
    register_type: read
    address: 39
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad3ActivePower

  - platform: template
    name: Smart Load 3 active power
    id: smartLoad3ActivePower
    icon: mdi:power
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(smartLoad3L1ActivePower).state + id(smartLoad3L2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 L1 active power
    id: smartLoad4L1ActivePower
    icon: mdi:power
    register_type: read
    address: 40
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad4ActivePower

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 L2 active power
    id: smartLoad4L2ActivePower
    icon: mdi:power
    register_type: read
    address: 41
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    value_type: S_WORD
    filters:
      - multiply: 1
    on_value:
      then:
        - component.update: smartLoad4ActivePower

  - platform: template
    name: Smart Load 4 active power
    id: smartLoad4ActivePower
    icon: mdi:power
    disabled_by_default: true
    unit_of_measurement: 'W'
    device_class: power
    lambda: |-
      return id(smartLoad4L1ActivePower).state + id(smartLoad4L2ActivePower).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load energy today L1
    id: eLoadTodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 42
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eLoadToday

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Load energy today L2
    id: eLoadTodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 43
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eLoadToday

  - platform: template
    name: Load energy today
    id: eLoadToday
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eLoadTodayL1).state + id(eLoadTodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS energy today L1
    id: eUpsTodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 44
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eUpsToday

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: UPS energy today L2
    id: eUpsTodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 45
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eUpsToday

  - platform: template
    name: UPS energy today
    id: eUpsToday
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eUpsTodayL1).state + id(eUpsTodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Energy to grid today
    id: eToGridToday
    icon: mdi:meter-electric
    register_type: read
    address: 46
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Energy to user today
    id: eToUserToday
    icon: mdi:meter-electric
    register_type: read
    address: 48
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Energy Generator today
    id: eGenToday
    icon: mdi:meter-electric
    register_type: read
    address: 49
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 energy today L1
    id: eSmartLoad1TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 50
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad1Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 1 energy today L2
    id: eSmartLoad1TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 51
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad1Today

  - platform: template
    name: Smart Load 1 energy today
    id: eSmartLoad1Today
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eSmartLoad1TodayL1).state + id(eSmartLoad1TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 energy today L1
    id: eSmartLoad2TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 52
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad2Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 2 energy today L2
    id: eSmartLoad2TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 53
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad2Today

  - platform: template
    name: Smart Load 2 energy today
    id: eSmartLoad2Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eSmartLoad2TodayL1).state + id(eSmartLoad2TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 energy today L1
    id: eSmartLoad3TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 54
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad3Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 3 energy today L2
    id: eSmartLoad3TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 55
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad3Today

  - platform: template
    name: Smart Load 3 energy today
    id: eSmartLoad3Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eSmartLoad3TodayL1).state + id(eSmartLoad3TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 energy today L1
    id: eSmartLoad4TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 56
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad4Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Smart Load 4 energy today L2
    id: eSmartLoad4TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 57
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad4Today

  - platform: template
    name: Smart Load 4 energy today
    id: eSmartLoad4Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eSmartLoad4TodayL1).state + id(eSmartLoad4TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 1 energy today L1
    id: eACcouple1TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 58
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple1Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 1 energy today L2
    id: eACcouple1TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 59
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple1Today

  - platform: template
    name: AC couple 1 energy today
    id: eACcouple1Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eACcouple1TodayL1).state + id(eACcouple1TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 2 energy today L1
    id: eACcouple2TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 60
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple2Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 2 energy today L2
    id: eACcouple2TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 61
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple2Today

  - platform: template
    name: AC couple 2 energy today
    id: eACcouple2Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eACcouple2TodayL1).state + id(eACcouple2TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 3 energy today L1
    id: eACcouple3TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 62
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple3Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 3 energy today L2
    id: eACcouple3TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 63
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple3Today

  - platform: template
    name: AC couple 3 energy today
    id: eACcouple3Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eACcouple3TodayL1).state + id(eACcouple3TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 4 energy today L1
    id: eACcouple4TodayL1
    icon: mdi:meter-electric
    register_type: read
    address: 64
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple4Today

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: AC couple 4 energy today L2
    id: eACcouple4TodayL2
    icon: mdi:meter-electric
    register_type: read
    address: 65
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    value_type: U_WORD
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple4Today

  - platform: template
    name: AC couple 4 energy today
    id: eACcouple4Today
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    device_class: energy
    lambda: |-
      return id(eACcouple4TodayL1).state + id(eACcouple4TodayL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total load energy L1
    id: eLoadTotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 68
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eLoadTotal

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total load energy L2
    id: eLoadTotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 70
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eLoadTotal

  - platform: template
    name: Total load energy
    id: eLoadTotal
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eLoadTotalL1).state + id(eLoadTotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total UPS energy L1
    id: eUpsTotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 72
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eUpsTotal

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total UPS energy L2
    id: eUpsTotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 74
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eUpsTotal

  - platform: template
    name: Total UPS energy
    id: eUpsTotal
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eUpsTotalL1).state + id(eUpsTotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy to grid L1
    id: eToGridTotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 76
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eToGridTotal

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy to grid L2
    id: eToGridTotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 78
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eToGridTotal

  - platform: template
    name: Total energy to grid
    id: eToGridTotal
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eToGridTotalL1).state + id(eToGridTotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy to user L1
    id: eToUserTotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 80
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eToUserTotal

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy to user L2
    id: eToUserTotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 82
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eToUserTotal

  - platform: template
    name: Total energy to user
    id: eToUserTotal
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eToUserTotalL1).state + id(eToUserTotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy Generator L1
    id: eGenTotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 84
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eGenTotal

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total energy Generator L2
    id: eGenTotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 86
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eGenTotal

  - platform: template
    name: Total energy Generator
    id: eGenTotal
    icon: mdi:meter-electric
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eGenTotalL1).state + id(eGenTotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 1 energy L1
    id: eSmartLoad1TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 88
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad1Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 1 energy L2
    id: eSmartLoad1TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 90
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad1Total

  - platform: template
    name: Total Smart Load 1 energy
    id: eSmartLoad1Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eSmartLoad1TotalL1).state + id(eSmartLoad1TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 2 energy L1
    id: eSmartLoad2TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 92
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad2Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 2 energy L2
    id: eSmartLoad2TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 94
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad2Total

  - platform: template
    name: Total Smart Load 2 energy
    id: eSmartLoad2Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eSmartLoad2TotalL1).state + id(eSmartLoad2TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 3 energy L1
    id: eSmartLoad3TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 96
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad3Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 3 energy L2
    id: eSmartLoad3TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 98
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad3Total

  - platform: template
    name: Total Smart Load 3 energy
    id: eSmartLoad3Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eSmartLoad3TotalL1).state + id(eSmartLoad3TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 4 energy L1
    id: eSmartLoad4TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 100
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad4Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total Smart Load 4 energy L2
    id: eSmartLoad4TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 102
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eSmartLoad4Total

  - platform: template
    name: Total Smart Load 4 energy
    id: eSmartLoad4Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eSmartLoad4TotalL1).state + id(eSmartLoad4TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 1 energy L1
    id: eACcouple1TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 104
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple1Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 1 energy L2
    id: eACcouple1TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 106
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple1Total

  - platform: template
    name: Total AC couple 1 energy
    id: eACcouple1Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eACcouple1TotalL1).state + id(eACcouple1TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 2 energy L1
    id: eACcouple2TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 108
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple2Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 2 energy L2
    id: eACcouple2TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 110
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple2Total

  - platform: template
    name: Total AC couple 2 energy
    id: eACcouple2Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eACcouple2TotalL1).state + id(eACcouple2TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 3 energy L1
    id: eACcouple3TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 112
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple3Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 3 energy L2
    id: eACcouple3TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 114
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple3Total

  - platform: template
    name: Total AC couple 3 energy
    id: eACcouple3Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eACcouple3TotalL1).state + id(eACcouple3TotalL2).state;


  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 4 energy L1
    id: eACcouple4TotalL1
    icon: mdi:meter-electric
    register_type: read
    address: 116
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple4Total

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Total AC couple 4 energy L2
    id: eACcouple4TotalL2
    icon: mdi:meter-electric
    register_type: read
    address: 118
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    value_type: S_DWORD_R
    filters:
      - multiply: 0.1
    on_value:
      then:
        - component.update: eACcouple4Total

  - platform: template
    name: Total AC couple 4 energy
    id: eACcouple4Total
    icon: mdi:meter-electric
    disabled_by_default: true
    unit_of_measurement: 'kWh'
    state_class: total_increasing
    device_class: energy
    lambda: |-
      return id(eACcouple4TotalL1).state + id(eACcouple4TotalL2).state;

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Phase lock frequency
    id: phaseLockFreq
    register_type: read
    address: 128
    unit_of_measurement: 'Hz'
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Grid frequency
    id: gridFreq
    register_type: read
    address: 129
    unit_of_measurement: 'Hz'
    value_type: U_WORD
    filters:
      - multiply: 0.01

  - platform: modbus_controller
    modbus_controller_id: modbus_conroller1
    name: Generator frequency
    id: genFreq
    register_type: read
    address: 130
    unit_of_measurement: 'Hz'
    value_type: U_WORD
    filters:
      - multiply: 0.01
